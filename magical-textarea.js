// Generated by CoffeeScript 1.6.2
(function() {
  var idCount;

  idCount = 0;

  module.exports = function(textarea) {
    var checkDomAdded, checkHeight, id;

    textarea = $(textarea);
    id = textarea.attr('id') || ("autoexpanding_textarea_" + (++idCount));
    textarea.attr('id', id);
    (checkHeight = function() {
      var paddingDifference;

      paddingDifference = textarea.innerHeight() - textarea.height();
      if (textarea[0].scrollHeight > textarea.innerHeight()) {
        return textarea.height(textarea[0].scrollHeight - paddingDifference);
      }
    })();
    textarea.on('keyup change', checkHeight);
    return (checkDomAdded = function() {
      if ($("#" + id).length) {
        return _.defer(function() {
          return checkHeight();
        });
      } else {
        return setTimeout(checkDomAdded, 20);
      }
    })();
  };

}).call(this);
